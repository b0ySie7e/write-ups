# Kernel Exploit

Lo ideal es que la escalada de privilegios conduzca a privilegios de root. A veces, esto se puede lograr simplemente explotando una vulnerabilidad existente o, en algunos casos, accediendo a otra cuenta de usuario que tenga más privilegios, información o acceso.

A menos que una única vulnerabilidad conduzca a un shell raíz, el proceso de escalada de privilegios dependerá de configuraciones erróneas y permisos laxos.

El kernel en los sistemas Linux gestiona la comunicación entre componentes como la memoria del sistema y las aplicaciones. Esta función crítica requiere que el kernel tenga privilegios específicos; por lo tanto, un exploit exitoso potencialmente conducirá a privilegios de root.

La metodología de explotación del Kernel es sencilla;

1. Identificar la versión del kernel
2. Busque y encuentre un código de explotación para la versión del kernel del sistema de destino
3. Ejecute el exploit

Aunque parezca sencillo, recuerde que un exploit fallido del kernel puede provocar un fallo del sistema. Asegúrese de que este resultado potencial sea aceptable dentro del alcance de su compromiso de prueba de penetración antes de intentar explotar el kernel.

### **Fuentes de investigación:**

1. Según sus hallazgos, puede utilizar Google para buscar un código de explotación existente.
2. Fuentes como [https://www.linuxkernelcves.com/cves](https://www.linuxkernelcves.com/cves) también pueden resultar útiles.
3. Otra alternativa sería utilizar un script como LES ( Linux Exploit Suggester), pero recuerde que estas herramientas pueden generar falsos positivos (informar de una vulnerabilidad del kernel que no afecta al sistema de destino) o falsos negativos (no informar de ninguna vulnerabilidad del kernel aunque el kernel esté vulnerable).

### **Consejos/Notas:**

1. Ser demasiado específico acerca de la versión del kernel al buscar exploits en Google, Exploit-db o searchsploit.
2. Asegúrese de comprender cómo funciona el código de explotación ANTES de ejecutarlo. Algunos códigos de explotación pueden realizar cambios en el sistema operativo que los harían inseguros en el futuro o realizar cambios irreversibles en el sistema, creando problemas más adelante. Por supuesto, estas pueden no ser grandes preocupaciones dentro de un laboratorio o entorno CTF, pero son absolutamente prohibidas durante un compromiso de prueba de penetración real.
3. Algunos exploits pueden requerir mayor interacción una vez que se ejecutan. Lea todos los comentarios e instrucciones proporcionadas con el código de explotación.
4. Puede transferir el código de explotación desde su máquina al sistema de destino utilizando el `SimpleHTTPServer` módulo Python y `wget` respectivamente.

* Ejemplo:

```shell
karen@wade7363:/tmp/tmp.GNTrk4H2vo$ uname -a
Linux wade7363 3.13.0-24-generic #46-Ubuntu SMP Thu Apr 10 19:11:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
```

* [https://github.com/0x1ns4n3/CVE-2015-1328-GoldenEye](https://github.com/0x1ns4n3/CVE-2015-1328-GoldenEye)

Subimos el exploit a la maquina victima

<figure><img src="../../.gitbook/assets/20231008015204.png" alt=""><figcaption></figcaption></figure>

Ejecutamos y somos root:

<figure><img src="../../.gitbook/assets/20231008015230.png" alt=""><figcaption></figcaption></figure>
